<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>
        
        正则表达式：基础 |
        
        GRAVE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <link rel="icon" href="/favicon.png">
    
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">GRAVE</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Living Life Over</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <!--<div id="search-form-wrap">-->
        <!--<form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>-->
      <!--</div>-->
    </div>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/-net/">.net</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ecma-262/">ecma-262</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kendoui/">kendoui</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/veronica/">veronica</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发-团队/">开发 & 团队</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
</aside>
      
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-js-regex-basic" class="article article-type-post" itemscope
         itemprop="blogPost">

    <div class="dropdown toc-trigger">
        <a data-toggle="dropdown" href="#">目录</a>
        <div class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建正则表达式"><span class="toc-number">1.</span> <span class="toc-text">创建正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本语法"><span class="toc-number">2.</span> <span class="toc-text">基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#特殊字符"><span class="toc-number">2.1.</span> <span class="toc-text">特殊字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符类"><span class="toc-number">2.2.</span> <span class="toc-text">字符类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#量词"><span class="toc-number">2.3.</span> <span class="toc-text">量词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#选择"><span class="toc-number">2.4.</span> <span class="toc-text">选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引用、分组"><span class="toc-number">2.5.</span> <span class="toc-text">引用、分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#匹配位置"><span class="toc-number">2.6.</span> <span class="toc-text">匹配位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修饰符"><span class="toc-number">2.7.</span> <span class="toc-text">修饰符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-number">3.</span> <span class="toc-text">其他</span></a></li></ol>
        </div>
    </div>

    <div class="article-inner">
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      正则表达式：基础
    </h1>
  

        </header>
        

        <div class="article-meta">
            <a href="/2013/12/15/js-regex-basic/" class="article-date">
  <time datetime="2013-12-15T03:19:07.000Z" itemprop="datePublished">Dec 15 2013</time>
</a>
            
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

        </div>

        <hr/>

        <div class="article-entry" itemprop="articleBody">
            
            <h2 id="创建正则表达式">创建正则表达式</h2>
<p><strong>1. 使用直接量（推荐）</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/pattern/attributes</div></pre></td></tr></table></figure>


<p><strong>2. 使用对象</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(pattern, attributes);</div></pre></td></tr></table></figure>

<p><strong>注意：</strong>在 ECMAScript 3 规范和 ES5 规范中，ES3规定同一段直接量正则表达式每次引用同一对象，而ES5则刚好相反，IE和最新版的浏览器均遵循ES5</p>
<h2 id="基本语法">基本语法</h2>
<h3 id="特殊字符">特殊字符</h3>
<table>
<thead>
<tr>
<th>字符</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>\o</td>
<td>NUL字符（\u0000）</td>
</tr>
<tr>
<td>\t</td>
<td>制表符（\u0009）</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符(\u000B)</td>
</tr>
<tr>
<td>\n</td>
<td>换行(\u000A)</td>
</tr>
<tr>
<td>\r</td>
<td>回车(\u000D)</td>
<td></td>
</tr>
<tr>
<td>\f</td>
<td>换页(\u000C)</td>
<td></td>
</tr>
<tr>
<td>\xnn</td>
<td>十六进制数nn为拉丁字符 例如：\x0A = \n</td>
</tr>
<tr>
<td>\uxxxx</td>
<td>十六进制数xxxx为Unicode编码</td>
</tr>
<tr>
<td>\cX</td>
<td>X 指定控制字符</td>
</tr>
</tbody>
</table>
<p><strong>元字符</strong></p>
<pre><code><span class="attribute">^ $ ( ) [ ] { } \ / . * + ? </span>=<span class="string"> ! : |</span>
</code></pre><p>注意：这些元字符在使用时都需要转义</p>
<h3 id="字符类">字符类</h3>
<p>原则上正则的一个字符对应一个字符，我们可以用 [ ] 把它们括起来，让[ ]这个整体对应一个字符。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[...]</code></td>
<td>任意字符类</td>
</tr>
<tr>
<td><code>[^...]</code></td>
<td>负向类</td>
</tr>
<tr>
<td><code>[A-Z]</code></td>
<td>范围类</td>
</tr>
<tr>
<td><code>[A-Za-z]</code></td>
<td>组合类</td>
</tr>
</tbody>
</table>
<p><strong>特殊字符类</strong></p>
<table>
<thead>
<tr>
<th>字符</th>
<th>解释</th>
<th>记忆</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>除换行符或其他Unicode终止符的任意字符          </td>
</tr>
<tr>
<td>\w</td>
<td>等价[a-zA-Z0-9]，任意ASCII字符组成的单词</td>
<td>words</td>
</tr>
<tr>
<td>\W</td>
<td>等价[^a-zA-Z0-9]</td>
<td></td>
</tr>
<tr>
<td>\s</td>
<td>等价[\t\n\x0B\f\r] Unicode空白符</td>
<td>space</td>
</tr>
<tr>
<td>\S</td>
<td>任何非Unicode空白符</td>
<td></td>
</tr>
<tr>
<td>\d</td>
<td>等价于[0-9]，任何ASCII数字</td>
<td>digit</td>
</tr>
<tr>
<td>\D</td>
<td>等价于[^0-9]</td>
<td></td>
</tr>
<tr>
<td>[\b]</td>
<td>退格直接量</td>
</tr>
</tbody>
</table>
<h3 id="量词">量词</h3>
<p>放到正则模式后，表示重复次数</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{n, m}</code></td>
<td>n到m次（包含n和m）</td>
</tr>
<tr>
<td><code>{n, }</code></td>
<td>n到任意次</td>
</tr>
<tr>
<td><code>{n}</code></td>
<td>n次</td>
</tr>
<tr>
<td><code>?</code></td>
<td>{0,1}</td>
</tr>
<tr>
<td><code>+</code></td>
<td>{1, }</td>
</tr>
<tr>
<td><code>*</code></td>
<td>{0, }</td>
</tr>
</tbody>
</table>
<p><strong>贪婪与非贪婪的重复</strong></p>
<ul>
<li>默认是贪婪匹配</li>
<li>在量词后面添加 <code>?</code> 代表非贪婪匹配</li>
</ul>
<p>示例 1：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">贪婪与非贪婪匹配结果不同</div><div class="line"><span class="regexp">/a+/</span> 与 <span class="regexp">/a+?/</span></div></pre></td></tr></table></figure>

<p>示例 2：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">贪婪与非贪婪匹配结果相同（详见JSTDG p258）</div><div class="line"><span class="regexp">/a+b/</span> 与 <span class="regexp">/a+?b/</span></div></pre></td></tr></table></figure>

<h3 id="选择">选择</h3>
<p>使用 <code>|</code> 来进行选择，以下几个例子:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/<span class="keyword">ab</span>|<span class="keyword">cd</span>|ef/</div><div class="line">/[<span class="keyword">ab</span>]|[<span class="keyword">cd</span>]|[ef]/</div></pre></td></tr></table></figure>

<h3 id="引用、分组">引用、分组</h3>
<p><code>( )</code> 的作用：</p>
<ol>
<li>对单独的项进行组合（可以是嵌套的）</li>
<li>定义子模式（在字符串方法中使用）</li>
<li>可用于后部引用，例如 \1</li>
</ol>
<p><strong>关于引用的一些注意点：</strong></p>
<ol>
<li>引用的计数从1开始，并且组索引编号规则记的是参与计数的左括号的位置</li>
<li>引用是指与模式相匹配文本的引用，而不是对子表达式模式的引用</li>
<li>如果使用 <code>(?: )</code> 则只组合，而不记忆与该组相匹配的字符。以该形式进行的分组不参与分组编码，因此引用计数时不考虑</li>
</ol>
<blockquote>
<p>1、比较：<code>/[&#39;&quot;][^&#39;&quot;]*[&#39;&quot;]/</code> 与 <code>/[&#39;&quot;][^&#39;&quot;]*\1/</code><br>2、为什么以下表达式非法：<code>/[&#39;&quot;][^\1]*\1/</code></p>
</blockquote>
<h3 id="匹配位置">匹配位置</h3>
<p><strong>锚字符</strong></p>
<table>
<thead>
<tr>
<th>字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>^</code></td>
<td>字符串开头，多行模式下，匹配一行开头</td>
</tr>
<tr>
<td><code>$</code></td>
<td>字符串开头，多行模式下，匹配一行开头</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>匹配单词边界，特殊情况：[\b] 匹配退格符</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>匹配非单词边界</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/\<span class="constant">B</span>[<span class="constant">Ss</span>]cript\b/ </div><div class="line"><span class="regexp">//</span> 匹配 <span class="string">"JavaScript"</span>  和 “postsscript” ，不匹配 “script” 和 “<span class="constant">Scripting</span>”</div></pre></td></tr></table></figure>

<p><strong>零宽断言</strong></p>
<table>
<thead>
<tr>
<th>符号</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(?= ...)</code></td>
<td>零宽正向先行断言</td>
</tr>
<tr>
<td><code>(?! ...)</code></td>
<td>零宽负向先行断言</td>
</tr>
</tbody>
</table>
<p>PS:（JS不支持后预测断言）</p>
<p>示例 1：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 匹配 <span class="string">"JavaScript：The Definitive Guide"</span> 中的 <span class="string">"JavaScript"</span>，而不匹配 <span class="string">"Java In"</span> 中的 <span class="string">"Java"</span></div><div class="line"></div><div class="line">/[Jj]ava([<span class="literal">Ss</span>]cript)?(?=\:)/</div></pre></td></tr></table></figure>

<p>示例 2：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// 可匹配 <span class="string">"JavaBeans"</span> 和 <span class="string">"JavaScript"</span> 中的 Java，不能匹配 <span class="string">"Javanese"</span> 和 <span class="string">"JavaScripter"</span>（为什么？）</div><div class="line"></div><div class="line">/Java(?!Script)([A-Z]\w<span class="keyword">*</span>)/</div></pre></td></tr></table></figure>

<h3 id="修饰符">修饰符</h3>
<ul>
<li>i: 不区分大小写</li>
<li>g: 全局匹配，就是找到所有匹配，而不是找到一个就停止</li>
<li>m: 多行匹配模式</li>
</ul>
<p>示例：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/<span class="command">\bjava</span><span class="command">\b</span>/gi</div></pre></td></tr></table></figure>

<h2 id="其他">其他</h2>
<p><strong>正则表达式在线测试工具</strong></p>
<ul>
<li><a href="http://regex101.com/#javascript" target="_blank" rel="external">http://regex101.com/#javascript</a></li>
</ul>
<p><strong>参考资料</strong></p>
<ul>
<li><a href="https://deerchao.net/tutorials/regex/regex.htm#lookaround" target="_blank" rel="external">https://deerchao.net/tutorials/regex/regex.htm#lookaround</a></li>
<li><a href="http://www.cnblogs.com/rubylouvre/archive/2010/03/09/1681222.html" target="_blank" rel="external">http://www.cnblogs.com/rubylouvre/archive/2010/03/09/1681222.html</a></li>
</ul>

            
        </div>

    </div>

    
    
<nav id="article-nav">
  
    <a href="/2013/12/17/ecma_lexical_ecma_imp/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          词法环境：ECMAScript 实现
        
      </div>
    </a>
  
  
    <a href="/2013/12/15/ecma_lexical_common_theory/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">词法环境：公共理论</div>
    </a>
  
</nav>

    

</article>
</section>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 gochant<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    
    
  </div>
  <script src="/js/jquery-1.11.1.min.js" type="text/javascript"></script>

  <script src="/js/dropdown.js" type="text/javascript"></script>

</body>
</html>